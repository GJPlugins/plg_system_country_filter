<?xml version="1.0" encoding="utf-8"?>
<extension version="3.0" type="plugin" group="system" method="upgrade">
    <name>Joomla - Country Filter</name>
    <author>Gartes</author>
    <creationDate>29th of April, 2020</creationDate>
    <copyright>Copyright © By Gartes. All rights reserved.</copyright>
    <license>Proprietary. Copyrighted Commercial Software</license>
    <authorEmail>sad.net79@gmail.com</authorEmail>
    <authorUrl>http://back-end.ga/</authorUrl>
    <version>0.0.3</version>
    <description><![CDATA[Developed & Powered by <a href="http://back-end.ga/" target="_blank">back-end.ga/</a>]]></description>
    <files>
        <folder>asset</folder>
        <folder>field</folder>
        <folder>Helpers</folder>
        <folder>language</folder>
        <folder>sql</folder>
        <folder>tmpl</folder>
        <filename plugin="country_filter">country_filter.php</filename>
        <filename>country_filter_update.xml</filename>
        <filename>README.md</filename>
    </files>
    <config>
        <fields name="params">
            <fieldset name="basic">
				<field
						name="city_cookie"
						type="list"
						label="COUNTRY_FILTER_FIELD_COOKIE_LABEL"
						description="COUNTRY_FILTER_FIELD_COOKIE_DESC"
						default="1"
						filter="integer"
				>
					<option value="1">COUNTRY_FILTER_OPTION_YEAR</option>
					<option value="0">COUNTRY_FILTER_OPTION_SESSION</option>
				</field>
            </fieldset>
            <fieldset name="module">
                <field name="module_position"
                	type="moduleposition"
                	default="region-select"
                	class="module_position "
                	label="COUNTRY_FILTER_MODULE_POSITION"
                	description="COUNTRY_FILTER_MODULE_POSITION_DESC"
                	showon=""
                	filter="raw" />
                <field name="default_str"
                	type="text"
                	default="Выберите город"
                	class="default_str "
                	readonly=""
                	required=""
                	label="COUNTRY_FILTER_DEFAULT_STR"
                	description="COUNTRY_FILTER_DEFAULT_STR_DESC"
                	showon=""
                	filter="raw" />
                	
                <field name="intro_txt"
                	type="text"
                	default="Доставляем заказы по всей России!"
                	class="intro_txt "
                	readonly=""
                	required=""
                	label="COUNTRY_FILTER_INTRO_TXT"
                	description="COUNTRY_FILTER_INTRO_TXT_DESC"
                	showon=""
                	filter="raw" />
                	
                <field name="before_input_text"
                	type="text"
                	default="Введите населенный пункт России"
                	class="before_input_text "
                	readonly=""
                	required=""
                	label="COUNTRY_FILTER_BEFORE_INPUT_TEXT"
                	description="COUNTRY_FILTER_BEFORE_INPUT_TEXT_DESC"
                	showon=""
                	filter="raw" />

                <!--<field name="top_city"
                	type="list"
                	default=""
                	required=""
                	label="COUNTRY_FILTER_TOP_CITY"
                	description="COUNTRY_FILTER_TOP_CITY_DESC"
                	class="top_city "
                	multiple="true"
                	readonly=""
                	showon=""
                	filter="raw" >
&lt;!&ndash;                		<option value="">Please Select</option>&ndash;&gt;
                		<option  value="1">Москва</option>
                		<option value="2">Санкт-Петербург</option>
                		<option value="3">Новосибирск</option>
                		<option value="4">Екатеринбург</option>
                		<option value="5">Нижний Новгород</option>
                		<option value="6">Казань</option>
                	</field>-->

				 <field name="top_city"
				     type="sql"
				     query="SELECT e.* FROM #__plg_system_country_filter_cities AS e  GROUP BY e.title ORDER BY e.title ASC "
				 			key_field="title"
				 			value_field="title"
				     multiple="1"
				     translate="false"
				     header="Пожалуйста выберите"
				     label="COUNTRY_FILTER_TOP_CITY"
				     description="COUNTRY_FILTER_TOP_CITY_DESC"
				     class="top_city "
				     showon="" />
			</fieldset>
			<fieldset name="api">
				<field name="google_map_api_key"
					type="text"
					default="XXXXXXXXXX"
					class="google_map_api_key "
					readonly=""
					required="1"
					label="COUNTRY_FILTER_GOOGLE_MAP_API_KEY"
					description="COUNTRY_FILTER_GOOGLE_MAP_API_KEY_DESC"
					showon=""
					filter="raw" />

				<!--
				https://developers.google.com/maps/documentation/javascript/reference/places-autocomplete-service#ComponentRestrictions
			 	https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes
			 	-->
				<field name="country_autocomplete"
					type="list"
					default=""
					required=""
					label="COUNTRY_FILTER_COUNTRY_AUTOCOMPLETE"
					description="COUNTRY_FILTER_COUNTRY_AUTOCOMPLETE_DESC"
					class="country_autocomplete "
					multiple="1"
					readonly=""
					showon=""
					filter="raw" >
						<option value="ru">COUNTRY_FILTER_COUNTRY_AUTOCOMPLETE_OPTION_RU</option>
						<option value="ua">COUNTRY_FILTER_COUNTRY_AUTOCOMPLETE_OPTION_UA</option>
					</field>


						
					
			</fieldset>
        </fields>
    </config>
	<install>
		<sql>
			<file driver="mysql" charset="utf8">sql/country_filter.install.sql</file>
		</sql>
	</install>
	<uninstall>
		<sql>
			<file driver="mysql" charset="utf8">sql/country_filter.uninstall.sql</file>
		</sql>
	</uninstall>
	<update>
		<schemas>
			<schemapath type="mysql">sql/updates/mysql</schemapath>
		</schemas>
	</update>
    <updateservers>
        <server type="extension" name="Joomla - Country Filter Update Site">https://raw.githubusercontent.com/GJPlugins/plg_system_country_filter/master/country_filter_update.xml</server>
    </updateservers>
</extension>

<!--

https://github.com/gartes/GNZ11/archive/master.zip
https://github.com/GJPlugins/plg_system_country_filter/archive/master.zip
-->